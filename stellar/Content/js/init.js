/*! inline 0.0.1 2014-07-23 */
/*   */
function alais_scruber(a,b){var c=a.val();c=c.split(" ").join("-"),c=c.split("&").join("-and-"),c=c.replace(/[^A-Za-z0-9\-_]/g,""),c=c.split("--").join("-"),c=c.split("__").join("_"),c=c.split("/").join(""),b.val(c.toLowerCase())}function turnon_alias(a,b){a.off().on("keyup",function(){alais_scruber(a,b)})}function make_maskes(){$.mask.definitions["~"]="[+-]",$('[type="date"],[rel="date"]').mask("99/99/9999",{completed:function(){}}),$("#tab_date").mask("9999",{completed:function(){}}),$("input").blur(function(){}).dblclick(function(){$(this).unmask()}),$("label i[title]").tooltip(),$('[type="date"],[rel="date"]').datepicker()}function make_tax_form(a,b,c){var d=$("#taxonomyitem form");d.find('[type="submit"]').on("click",function(e){if(e.preventDefault(),e.stopPropagation(),$("#taxonomyitem form").on("change",function(){var a=!0;$.each($("input,select"),function(){""!==$(this).not(":hidden").val()&&""!==$(this).not(":hidden").find(":selected").val()&&(a=!1)}),$('#taxonomyitem form input[name="empty"]').val(a+"")}),!d.find('input[name="empty"]').val()){"undefined"!=typeof b&&b();var f=d.find("input, textarea, select").serializeArray();$.ajax({cache:!1,url:"/admin/update_taxonomy.castle?ajax=true",data:f,dataType:"json",success:function(b){""!==b.alias?(a.find(".add").before('<option value="'+b.alias+'" '+(a.is(c)?"selected":"")+" >"+b.name+"</option>"),$("#taxonomyitem").dialog("destroy"),$("#taxonomyitem").remove(),popup_message($("<span><h5>You have added a  new taxonomy!</h5>It has also selected for you</span>")),$('form[name="entry_form"] :input:first').trigger("change")):popup_message($("<span>failed to save, try again.</span>"))}})}})}function moa_dmpk_setup(){$.each($(".has_moa_dmpk:not(.activated)"),function(){var a=$(this);$(this).addClass("activated");var b=a.closest(".moa_dmpk_block").find(".moa_dmpk");""===a.val()&&b.hide(),a.on("keyup",function(){""===a.val()?(b.find(":selected").attr("selected",!1),b.hide()):b.show()})})}function popup_message(a,b){"undefined"==typeof b&&(b=!1),$("#mess").length<=0&&$("body").append('<div id="mess">'),$("#mess").html("string"==typeof a||a instanceof String?a:a.html()),$("#mess").dialog({autoOpen:!0,resizable:!1,width:350,minHeight:25,modal:!0,draggable:!1,create:function(){b&&($(".ui-dialog-titlebar").remove(),$(".ui-dialog-buttonpane").remove()),$("body").css({overflow:"hidden"})},buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$("body").css({overflow:"auto"}),$("#mess").dialog("destroy"),$("#mess").remove()}})}function setting_item_pub(a){a.find(".pubstate").buttonset(),a.find(".pubstate :radio:checked").val()<1?a.find("#noting").next("label").show():a.find("#noting").next("label").hide(),a.find(".pubstate :radio").change(function(){a.find(".pubstate :radio").next("label").find("i").removeClass("icon-check-empty").removeClass("icon-check"),a.find(".pubstate :radio").not(":checked").next("label").find("i").addClass("icon-check-empty"),a.find(".pubstate :radio:checked").next("label").find("i").addClass("icon-check"),a.find(".pubstate :radio:checked").val()<1?a.find("#noting").next("label").show():a.find("#noting").next("label").hide(),a.find("#noting").next("label").find("i").addClass(""!==a.find(".notearea").find("textarea").val()?"icon-file-text-alt":"icon-file-alt")}),a.find("#noting").button(),a.find("#noting").change(function(){a.find(".notearea").dialog({autoOpen:!0,height:300,width:350,modal:!0,buttons:{"CLEAR Note":function(){$(this).find("textarea").val(""),$(this).dialog("close")},Accept:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}},close:function(){a.find(".noted").find("label").removeClass("ui-state-active");var b=$(this).find("textarea").val();a.find("[name='item.content']").val(b),a.find("#noting").attr("checked",!1),a.find("#noting").next("label").find("i").removeClass("icon-file-text-alt").removeClass("icon-file-alt"),a.find("#noting").next("label").find("i").addClass(""!==b?"icon-file-text-alt":"icon-file-alt"),$(this).dialog("destroy")}})})}function apply_a_taxed_add(a,b,c){$("a.tax_add").on("click",function(d){d.preventDefault(),d.stopPropagation(),start_taxed_add(a,b,c)})}function start_taxed_add(a,b,c){"undefined"===b&&(b=$($(this).data("select"))),$("#taxonomyitem").length<=0&&$("body").append("<div id='taxonomyitem'>");var d=$("#taxonomyitem");"undefined"===a&&(a=$(this).data("type")),$.ajax({cache:!1,url:"/admin/edit_taxonomy.castle",data:{skiplayout:1,type:a},success:function(a){d.html(a),d.dialog({autoOpen:!0,resizable:!1,modal:!0,draggable:!1,create:function(){$("body").css({overflow:"hidden"}),$("#taxonomyitem .ui-dialog-buttonpane").remove(),d.find('input[name$=".alias"]').closest("p").css({display:"none"})},open:function(){turnon_alias(d.find('input[name$=".name"]'),d.find('input[name$=".alias"]')),"undefined"==typeof c&&make_a_tax_form(b,function(){alais_scruber(d.find('input[name$=".name"]'),d.find('input[name$=".alias"]'))}),"function"==typeof c&&c(b)},close:function(){$("body").css({overflow:"auto"}),$("#taxonomyitem").dialog("destroy"),$("#taxonomyitem").remove()}}),$(window).resize(function(){var a=.25*$(window).width(),b=.25*$(window).height();$("#taxonomyitem").dialog("option",{width:a,height:b})})}})}function make_a_tax_form(a,b){var c=$("#taxonomyitem form");$("#taxonomyitem form").on("change",function(){var a=!0;$.each($("input,select"),function(){""!==$(this).not(":hidden").val()&&""!==$(this).not(":hidden").find(":selected").val()&&(a=!1)}),$('#taxonomyitem form input[name="empty"]').val(a+"")}),c.find('[type="submit"]').on("click",function(d){if(d.preventDefault(),d.stopPropagation(),!c.find('input[name="empty"]').val()){"function"==typeof b&&b();var e=c.find("input, textarea, select").serializeArray();$.ajax({cache:!1,url:"/center/update_taxonomy.castle?ajax=true",data:e,dataType:"json",success:function(b){""!==b.alias?("function"==typeof a&&a(b),"undefined"!=typeof a&&"function"!=typeof a&&a.find("option:first").before('<option value="'+b.alias+'" >'+b.name+"</option>"),$("#taxonomyitem").dialog("destroy"),$("#taxonomyitem").remove(),popup_message($("<span><h5>You have added a  new taxonomy!</h5>It has also selected for you</span>")),$('form[name="entry_form"] :input:first').trigger("change")):popup_message($("<span>failed to save, try again.</span>"))}})}})}function apply_tax_request(){$.each($(".requested_taxed:not(.activated)"),function(){var a=$(this);a.addClass("activated"),a.find(".add").length<=0&&a.find("option:last").after('<option value="" class="add">Request new option</option>')}),$(".requested_taxed").on("change",function(){var a=$(this),b=$(this).find("option:selected");if(b.hasClass("add")){b.removeAttr("selected"),$("#taxonomyitem").length<=0&&$("body").append("<div id='taxonomyitem'>");var c='<h3>Make a request for a new item</h3><lable>Name:</lable><input type="text" value=""/><br/><br/><input type="submit" value="Subbmit Request"/>',d=$("#taxonomyitem");d.html(c),d.dialog({autoOpen:!0,resizable:!1,width:450,modal:!0,draggable:!1,create:function(){$("body").css({overflow:"hidden"}),$(".ui-dialog-buttonpane").remove(),d.find('input[name$=".alias"]').closest("p").css({display:"none"}),make_tax_form(a,function(){alais_scruber(d.find('input[name$=".name"]'),d.find('input[name$=".alias"]'))})},open:function(){turnon_alias(d.find('input[name$=".name"]'),d.find('input[name$=".alias"]'))},close:function(){$("body").css({overflow:"auto"}),$("#taxonomyitem").dialog("destroy"),$("#taxonomyitem").remove()}})}})}function apply_taxed_add(){$.each($(".taxed:not(.activated)"),function(){var a=$(this);a.addClass("activated"),a.find(".add").length<=0&&a.find("option:last").after('<option value="" class="add">Add new option</option>')}),$(".taxed").on("change",function(){var a=$(this),b=$(this).find("option:selected");if(b.hasClass("add")){b.removeAttr("selected"),$("#taxonomyitem").length<=0&&$("body").append("<div id='taxonomyitem'>");var c,d=$("#taxonomyitem"),e=a.attr(""!==a.attr("rel")?"rel":"id");a.attr("rel").length&&(c=$('[rel="'+e+'"]')),$.ajax({cache:!1,url:"/admin/edit_taxonomy.castle",data:{skiplayout:1,type:e},success:function(b){d.html(b),d.dialog({autoOpen:!0,resizable:!1,modal:!0,draggable:!1,create:function(){$("body").css({overflow:"hidden"}),$(".ui-dialog-buttonpane").remove(),d.find('input[name$=".alias"]').closest("p").css({display:"none"}),make_tax_form(a,function(){alais_scruber(d.find('input[name$=".name"]'),d.find('input[name$=".alias"]'))},c)},open:function(){turnon_alias(d.find('input[name$=".name"]'),d.find('input[name$=".alias"]'))},close:function(){$("body").css({overflow:"auto"}),$("#taxonomyitem").dialog("destroy"),$("#taxonomyitem").remove()}}),$(window).resize(function(){$("#taxonomyitem").dialog("option",{width:.25*$(window).width(),height:.25*$(window).height()})})}})}})}function sortedCode(){$(".substance_item .icon-trash").off().on("click",function(){$(this).closest(".substance_item").fadeOut("fast",function(){$(this).remove(),sortedCode()})});var a="";$.each($(".substance_item"),function(b){a+=(""===a?"":"<em>:</em>")+$(this).find(".sub_code").text(),$(this).find(".substanceOrder").val(b+1)}),$("#sub_code").html(a)}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{a=decodeURIComponent(a.replace(g," "))}catch(b){return}try{return h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),$.fn.hideOptionGroup=function(){$.each($(this),function(){var a=$(this),b=a.attr("label"),c=a.closest("select").attr("name"),d=$("select").index(a.closest("select"));a.attr("data-pname",c),$("."+b+"_contaner_"+d).length<=0&&$("body").append("<select style='position:absolute;top:-9999em;left:-9999em;' class='"+b+"_contaner_"+d+"'><select>");var e=$("."+b+"_contaner_"+d);a.children().each(function(){$(this).removeAttr("selected")}),a.appendTo(e)})},$.fn.showOptionGroup=function(){$.each($(this),function(){var a=$(this).data("pname");$(this).appendTo($("select[name='"+a+"']"))})},function(a){a(document).ready(function(){a("#viewonly").change(function(){var b=a("#viewonly:checked").length;a.cookie("hivviewonly",1===b?"true":"false",{expires:1,path:"/"}),window.location=window.location.href}),a(".pubstate").buttonset(),a(".pubstate.menuaction :radio").change(function(){a(".pubstate :radio").next("label").find("i").removeClass("icon-check-empty").removeClass("icon-check"),a(".pubstate :radio").not(":checked").next("label").find("i").addClass("icon-check-empty"),a(".pubstate :radio:checked").next("label").find("i").addClass("icon-check");var b=a(".pubstate :radio:checked").val();a.cookie("hivpubview",1===b?"true":"false",{expires:1,path:"/"}),window.location=window.location.href}),setting_item_pub(a(".container")),a(".message.ui-state-highlight").length&&setTimeout(function(){a(".message.ui-state-highlight").fadeOut(500)},2e3)})}(jQuery),$(document).ready(function(){function a(a){var c="";c+="<div id='drPro_additions' class='min'>",c+="<h4>Create new "+a+"</h4>",c+="<div id='create_drPros_stub' class='full-input'>",c+="<form action='/center/savedrug.castle' method='post'><input name='item.baseid' type='hidden' value='0'>",c+="<input type='hidden' name='item.families.substance_id' value='"+$("[name='item.baseid']").val()+"'/>",c+="<input type='hidden' name='item.dose_form' value='"+a+"' style='display: inline-block; max-width:50%;'/>",c+="<input type='hidden' name='item.attached' value='false'/>",c+="<label>Unit <select name='item.dose_unit' style='display: inline-block; max-width:50%;'><option value=''>Select Unit</option><option value='ml'>ml</option></select></label>",c+="<label>Amounts<br/>",$.each($(".substance_item"),function(){c+="<span style='min-width:20%'>"+$(this).find(".sub_code").text()+":</span> <input type='text' class='sub_label_claim' style='width: auto; display: inline-block; max-width: 100%;' /><br/>"}),c+="</label>",c+="<input type='hidden' name='label_claim'/><br/>",c+="<label>Manufacturer<br/><select name='item.manufacturer' id='quick_drPro_manufacturer'><option value=''>Select</option></select><br/></label>",c+="</form>",c+="</div>",c+="</div>",c+="<div class='clearfix'></div>",$("#form_list").length<=0&&$("body").append('<div id="form_list">'),$("#form_list").html(c),$("#form_list").dialog({autoOpen:!0,resizable:!1,width:350,minHeight:150,height:"auto",maxHeight:$(window).height(),modal:!0,draggable:!1,create:function(){$(".ui-dialog-titlebar").remove(),$("body").css({overflow:"hidden"}),$(".ui-dialog-buttonset").prepend("<a href='#' id='create_drPros_stub_submit' class='button'>Add drug product stub</a>")},open:function(){$.getJSON("/center/get_taxonomies.castle?tax=commercial&callback=?",function(a){var b="";$.each(a,function(a,c){b+="<option value='"+c.alias+"'>"+c.name+"</option>"}),$("#quick_drPro_manufacturer").append(b)}),$(".item .icon-plus").on("click",function(){var a=$(this).closest("span").data("name"),c=$(this).closest("span").data("baseid"),d=$(this).closest("span").data("alias");b(a,c,d)}),$("#create_drPros_stub_submit").on("click",function(b){b.preventDefault(),b.stopPropagation();var c="";$.each($(".sub_label_claim"),function(a){a>0&&(c+=":"),c+=$.trim($(this).val())}),$('[name="label_claim"]').val(c),$('[name="label_claim"]').val(c);var d=$("#create_drPros_stub form").find("input, textarea, select").serializeArray();$.ajax({cache:!1,url:$("#create_drPros_stub form").attr("action")+"?json=true&ajaxed_update=true&callback=?",data:d,dataType:"json",success:function(b){""!==b.baseid?(popup_message($("<span><h5>You have added a new Durg Protuct!</h5> It was added to the table of products for the drug form.</span>")),$("#drpro_empty").remove(),$('[href="#existing_drPros"]').trigger("click"),$.each(b,function(b,c){var d=$("[id^='drPro_tabs_"+a+"']").find(".dataTable"),e=[],f=$(".drug_item.list_item").length;$.each(c.label_claim.split(":"),function(a,b){e.push(b)}),e.push(c.manufacturer),e.push('<input type="hidden" name="drugs['+f+'].baseid" value="'+c.baseid+'" class="drug_item list_item"/><a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a>'),d.dataTable().fnAddData(e),$("ul .display.datagrid.dataTable .removal").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest("tr"),c=$(this).closest(".dataTable").dataTable();b.fadeOut("75",function(){c.fnDeleteRow(c.fnGetPosition(b.get(0)))})})}),$("#form_list").dialog("close")):popup_message($("<span>failed to save, try again.</span>"))}})})},buttons:{Close:function(){$(this).dialog("close")}},close:function(){$("body").css({overflow:"auto"}),$("#form_list").dialog("destroy"),$("#form_list").remove()}})}function b(b,g,h){var i="drPro_tabs_"+h+"_"+e,j=$(d.replace(/#\{href\}/g,"#"+i).replace(/#\{label\}/g,b).replace(/#\{baseid\}/g,g).replace(/#\{name\}/g,b).replace(/#\{alias\}/g,h));if($("[id^='drPro_tabs_"+h+"_']").length<=0){c.find(".ui-tabs-nav").prepend(j);var k=f;c.prepend("<div id='"+i+"'>"+k+"<a href='#' id='drug_interaction' class='button add_drPro' data-type='"+h+"'>Add "+h+" form</a></div>"),c.tabs("refresh"),c.tabs("option","active",e),$('.drpro_table:not(".dataTable")').DataTable({bJQueryUI:!0,sPaginationType:"full_numbers",fnDrawCallback:function(){$("#"+i).find(".fg-toolbar .add_drPro").length<=0&&$("#"+i).find(".fg-toolbar.ui-widget-header:first").prepend('<a href="#" class="button add_drPro" style="float:left;">Add <i title="edit" class="icon-plus"></i></a>'),$("#"+i).find(".drpro_table .dataTables_empty").html("No "+b+' products available. <a href="#" class="add_drPro">Add <i title="edit" class="icon-plus"></i></a>'),$("#"+i).find(".add_drPro").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),a(h)})}}),e++}}$("#substances_disabled").on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#substances_disabled_mess").length<=0&&$("body").append('<div id="substances_disabled_mess">'),$("#substances_disabled_mess").html($(this).attr("title")),$("#substances_disabled_mess").dialog({autoOpen:!0,resizable:!1,width:350,minHeight:25,modal:!0,draggable:!1,create:function(){$(".ui-dialog-titlebar").remove(),$("body").css({overflow:"hidden"})},open:function(){},buttons:{Ok:function(){$(this).dialog("close"),window.location="/center/substance.castle"}},close:function(){$("body").css({overflow:"auto"}),$("#substances_disabled_mess").dialog("destroy"),$("#substances_disabled_mess").remove()}})}),$("#sortable").sortable({handle:".sortable_handle",placeholder:"ui-state-highlight",stop:function(){sortedCode()}}),$("#famSubAdd").on("click",function(a){a.preventDefault(),a.stopPropagation(),$.getJSON("/center/substances.castle?json=true&callback=?",function(a){var b="";$.each(a,function(a,c){$('[name="substances['+c.baseid+'].baseid"]').length<=0&&(b+="<span class='item i"+a+"' data-baseid='"+c.baseid+"' data-name='"+c.name+"' data-abbreviated='"+c.abbreviated+"'  ><i title='edit' class='icon-plus'></i>"+c.name+" ( "+c.abbreviated+" )<br/></span>")}),""===b&&(b="There are no substances to use."),$("#substances_list").length<=0&&$("body").append('<div id="substances_list">'),$("#substances_list").html(b),$("#substances_list").dialog({autoOpen:!0,resizable:!1,width:350,minHeight:25,modal:!0,draggable:!1,create:function(){$(".ui-dialog-titlebar").remove(),$("body").css({overflow:"hidden"})},open:function(){$(".item .icon-plus").on("click",function(){var a=$(this).closest("span");a.fadeOut("fast");var b="<li class='substance_item'>";b+="<i title='edit' class='icon-trash'></i>",b+="<span class='sortable_handle'>handle</span> "+a.data("name")+" (<span class='sub_code'>"+a.data("abbreviated")+"</span>)",b+="<input type='hidden' name='substances["+a.data("baseid")+"].baseid' value='"+a.data("baseid")+"' class='substance'/>",b+="<input type='hidden' name='family_substance["+a.data("baseid")+"].baseid' value='0'  class=''/>",b+="<input type='hidden' name='family_substance["+a.data("baseid")+"].family.baseid' value='"+$('[name="item.baseid"]').val()+"'  class=''/>",b+="<input type='hidden' name='family_substance["+a.data("baseid")+"].substance_order' value='"+$(".substance_item").length+"'  class='substanceOrder'/>",b+="<input type='hidden' name='family_substance["+a.data("baseid")+"].substance.baseid' value='"+a.data("baseid")+"'  class=''/>",b+="</li>",$(b).appendTo("#sortable"),$("#sortable").sortable("refresh"),sortedCode()})},buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$("body").css({overflow:"auto"}),$("#substances_list").dialog("destroy"),$("#substances_list").remove()}})})}),$("#famSubCode .icon-edit").on("click",function(){$("#subCodeEdit").is($(".open"))?$("#subCodeEdit").slideUp("slow",function(){$("#subCodeEdit").removeClass("open"),$("#subCodeEdit").addClass("closed")}):$("#subCodeEdit").slideDown("slow",function(){$("#subCodeEdit").addClass("open"),$("#subCodeEdit").removeClass("closed")})}),$("#subCodeEdit .icon-power-off").on("click",function(){$("#subCodeEdit").slideUp("slow",function(){$("#subCodeEdit").removeClass("open"),$("#subCodeEdit").addClass("closed")})}),sortedCode();var c=$("#drPro_tabed").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");$("#drPro_tabed li").removeClass("ui-corner-top").addClass("ui-corner-left");var d="<li><a href='#{href}' data-baseid='#{baseid}' data-name='#{name}' data-alias='#{alias}'>#{label}</a> <i class='icon-remove'></i></li>",e=$("#drPro_tabed li").length,f='<table width="100%" class="drpro_table display" cellspacing="0"><thead><tr>';$.each($(".substance_item"),function(){f+="<th>"+$(this).find(".sub_code").text()+" Amt.</th>"}),f+="<th>Manufacure</th><th>Actions</th></tr></thead><tfoot><tr>",$.each($(".substance_item"),function(){f+="<th></th>"}),f+="<th></th><th></th></tr></tfoot><tbody></tbody></table>",c.delegate("i.icon-remove","click",function(){var a=$(this).closest("li").remove().attr("aria-controls");$("#"+a).remove(),c.tabs("refresh")}),$("#addDrugForm").on("click",function(a){return a.preventDefault(),a.stopPropagation(),$(".substance_item").length<=0?(alert("You must add substances before you can add drugs"),!1):void $.getJSON("/center/get_taxonomies.castle?tax=dose_type&callback=?",function(a){var c="";c+="<div id='listing' style='max-height:95%; overflow-y:scroll;'>",$.each(a,function(a,b){$("[id^='drPro_tabs_"+b.alias+"_']").length<=0&&(c+="<span class='item i"+a+"' data-baseid='"+b.baseid+"' data-name='"+b.name+"' data-alias='"+b.alias+"'  ><i title='edit' class='icon-plus'></i>"+b.name+" ( "+b.alias+" )<br/></span>")}),c+="</div>",c+="<span id='add_drform' style='cursor:pointer;'><hr/><i title='edit' class='icon-plus'></i>Add a New form</span>",$("#form_list").length<=0&&$("body").append('<div id="form_list">'),$("#form_list").html(c),$("#form_list").dialog({autoOpen:!0,resizable:!1,width:350,minHeight:25,height:"auto",maxHeight:.65*$(window).height(),modal:!0,draggable:!1,create:function(){$(".ui-dialog-titlebar").remove(),$("body").css({overflow:"hidden"})},open:function(){$("#add_drform").on("click",function(){start_taxed_add("dose_type",function(){},function(){make_a_tax_form(function(a){$("#listing").append("<span class='item i"+a.baseid+"' data-baseid='"+a.baseid+"' data-name='"+a.name+"' data-alias='"+a.alias+"'  ><i title='edit' class='icon-plus'></i>"+a.name+" ( "+a.alias+" )<br/></span>"),$(".item .icon-plus").on("click",function(){$(this).closest("span").fadeOut("fast");var a=$(this).closest("span").data("name"),c=$(this).closest("span").data("baseid"),d=$(this).closest("span").data("alias");b(a,c,d)})})})}),$(".item .icon-plus").on("click",function(){$(this).closest("span").fadeOut("fast");var a=$(this).closest("span").data("name"),c=$(this).closest("span").data("baseid"),d=$(this).closest("span").data("alias");b(a,c,d)})},buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$("body").css({overflow:"auto"}),$("#form_list").dialog("destroy"),$("#form_list").remove()}})})}),$.each($('.drpro_table:not(".dataTable")'),function(){var b=$(this),c=b.closest(".tabedItem").attr("id"),d=b.closest(".tabedItem").data("alias"),e=b.closest(".tabedItem").data("name");b.DataTable({bJQueryUI:!0,sPaginationType:"full_numbers",fnDrawCallback:function(){$("#"+c).find(".fg-toolbar .add_drPro").length<=0&&$("#"+c).find(".fg-toolbar.ui-widget-header:first").prepend('<a href="#" class="button add_drPro" style="float:left;">Add <i title="edit" class="icon-plus"></i></a>'),$("#"+c).find(".drpro_table .dataTables_empty").html("No "+e+' products available. <a href="#" class="add_drPro">Add <i title="edit" class="icon-plus"></i></a>'),$("#"+c).find(".add_drPro").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),a(d)}),$("#"+c).find(".removal").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest("tr"),c=$(this).closest(".dataTable").dataTable();b.fadeOut("75",function(){c.fnDeleteRow(c.fnGetPosition(b.get(0)))})})}})}),$("#add_lmic").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$("#LMICdata").find(".dataTable"),c=[],d=$("#LMICdata tbody select").length,e=$("#dirty_options select").html(),f='<input type="hidden" name="lmics['+d+'].id" value="0"/><select name="lmics['+d+'].form">'+e+"</select>";c.push(f),c.push('<input type="text" placeholder="label claim amount" name="item.lmics['+d+'].form"/>'),c.push('<input type="checkbox" value="yes" name="lmics['+d+'].lmic_1l"/>'),c.push('<input type="checkbox" value="yes" name="lmics['+d+'].lmic_2l"/>'),c.push('<input type="checkbox" value="yes" name="lmics['+d+'].lmic_3l"/>'),c.push('<a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a>'),b.dataTable().fnAddData(c),$("#LMICdata tbody .removal").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest("tr"),c=$(this).closest(".dataTable").dataTable();b.fadeOut("75",function(){c.fnDeleteRow(c.fnGetPosition(b.get(0)))})})}),$("#drug_interaction").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$("#ddi").find(".dataTable"),c=[],d=$("#ddi tbody select").length,e="<option value=''>Select</option>",f='<input type="hidden" name="interactions['+d+'].id" value="0"/><select name="interactions['+d+'].substance">'+e+"</select>";c.push(f),f='<select name="interactions['+d+'].yes_no"><option value="yes">Yes</option><option value="no">No</option></select>',c.push(f),f='<input type="text" name="interactions['+d+'].dose_amount" value="" style="width:100%"/>',c.push(f),c.push('<textarea placeholder="Describe the interaction between the two drugs" name="interactions['+d+'].descriptions"  rows="1"></textarea>'),c.push('<a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a>'),b.dataTable().fnAddData(c),$("#ddi tbody .removal").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest("tr"),c=$(this).closest(".dataTable").dataTable();b.fadeOut("75",function(){c.fnDeleteRow(c.fnGetPosition(b.get(0)))})})})}),function(a){a(document).ready(function(){var b=a("#tabed").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");a(".ui-state-default span.ui-icon-close").on("click",function(c){c.preventDefault(),c.stopPropagation();var d=a(this).closest("li").remove().attr("aria-controls");a("#"+d).remove(),b.tabs("refresh"),a.each(a('input[name^="markets_counts["]'),function(b){a(this).attr("name","markets_counts["+(b+1)+"]")})}),a("#tabed li").removeClass("ui-corner-top").addClass("ui-corner-left"),a("#newyear").on("click",function(c){function d(){var c=e.val()||"Tab "+g,d="tabs-"+g,h=a(f.replace(/#\{href\}/g,"#"+d).replace(/#\{label\}/g,c));b.find(".ui-tabs-nav").prepend(h);var i=a("#querybed").html(),j=i.replace(/\{\{YEAR\}\}/g,c);j=j.replace(/\{\{COUNT\}\}/g,g+1).replace(/\{\{__\}\}/g,""),b.append("<div id='"+d+"'>"+j+"</div>"),b.tabs("refresh"),b.tabs("option","active",g),g++,a.each(a('input[name^="markets_counts["]'),function(b){a(this).attr("name","markets_counts["+(b+1)+"]")})}c.preventDefault(),c.stopPropagation(),a("#marketdialog").length<=0&&a("body").append('<div id="marketdialog" title="Tab data"><form><fieldset class="ui-helper-reset"><label for="tab_title">Year</label><input type="number" name="tab_date" id="tab_date" value="" class="ui-widget-content ui-corner-all" /></fieldset></form></div>');var e=a("#tab_date"),f="<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>",g=a("#tabed li").length,h=new Date,i=a("#marketdialog").dialog({autoOpen:!0,modal:!0,create:function(){make_maskes(),a("#tab_date").spinner({min:1980,max:h.getFullYear()+2,create:function(){a("#tab_date").spinner("value",h.getFullYear())},change:function(){a("#tab_date").val()>h.getFullYear()+2&&(a("#marketdialog").append('<p style="display:block; background-color:yellow; color:red; padding: 2px 5px;" id="yearWarning">You reached the max year. Reseting the year for you.</p>'),setTimeout(function(){a("#yearWarning").fadeOut(500)},2e3),a("#tab_date").val(h.getFullYear()+2))}})},buttons:{Add:function(){d(),a(this).dialog("close")},Cancel:function(){a(this).dialog("close")}},close:function(){j[0].reset()}}),j=i.find("form").submit(function(a){d(),i.dialog("close"),a.preventDefault()});b.delegate("span.ui-icon-close","click",function(){var c=a(this).closest("li").remove().attr("aria-controls");a("#"+c).remove(),b.tabs("refresh"),a.each(a('input[name^="markets_counts["]'),function(b){a(this).attr("name","markets_counts["+(b+1)+"]")})}),b.bind("keyup",function(c){if(c.altKey&&c.keyCode===a.ui.keyCode.BACKSPACE){var d=b.find(".ui-tabs-active").remove().attr("aria-controls");a("#"+d).remove(),b.tabs("refresh")}})})})}(jQuery),$(document).ready(function(){function a(a){0===$("#trial_arm_form").length&&$("#staging").append("<div id='trial_arm_form'></div>"),$.ajax({cache:!1,url:"/center/clinical.castle",data:{skiplayout:1,id:"undefined"==typeof a?"":a,typed_ref:$('[name="typed_ref"]').val()},success:function(a){var b=$("#trial_arm_form");b.html(a),b.dialog({autoOpen:!0,resizable:!1,width:$(window).width()-50,height:$(window).height()-50,modal:!0,draggable:!1,buttons:{Cancel:function(){$(this).dialog("close")}},create:function(){$("#mess").dialog("destroy"),$("#mess").remove(),$("body").css({overflow:"hidden"}),$(".ui-dialog-buttonpane").remove(),make_maskes(),moa_dmpk_setup(),apply_tax_request(),apply_taxed_add();var a=b.find(".tab_content").hide(),c=b.find("ul.tabs li");c.addClass("tabed"),c.first().addClass("active").show(),a.first().show(),c.on("click",function(b){b.preventDefault(),b.stopPropagation();var c=$(this),d=c.find("a").attr("href");return c.hasClass("active")||(c.addClass("active").siblings().removeClass("active"),a.hide().filter(d).fadeIn()),!1}),$(".uitabs").tabs(),b.find('[name="item.trials.baseid"]').val($('.container [name="item.baseid"]').val()),b.find("[type='submit']").on("click",function(a){var b=$(this).closest("form");b.find(":invalid").length<=0&&(a.preventDefault(),a.stopPropagation(),popup_message('<span style="font-size: 28px;"><i class="icon-spinner icon-spin icon-large"></i>Saving...</span>',!0),$.post(b.attr("action")+"?skiplayout=1&ajaxed_update=1",b.serialize(),function(){$("#mess").dialog("destroy"),$("#mess").remove();var a=$("#trial_arms.tab_content").find(".dataTable"),c=[],d=b.find('[name="item.name"]').val();c.push(d),c.push(b.find('[name="item.name"]').val()),c.push(b.find('[name="item.name"]').val()),c.push('<a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a>'),a.dataTable().fnAddData(c),$("ul .display.datagrid.dataTable .removal").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest("tr"),c=$(this).closest(".dataTable").dataTable();b.fadeOut("75",function(){c.fnDeleteRow(c.fnGetPosition(b.get(0)))})}),$("#trial_arm_form").dialog("destroy"),$("#trial_arm_form").remove()}))})},close:function(){$("body").css({overflow:"auto"}),$("#trial_arm_form").dialog("destroy"),$("#trial_arm_form").remove()}}),$(window).resize(function(){$("#trial_arm_form").dialog("option",{width:$(window).width()-50,height:$(window).height()-50})})}})}$(".trial_arm_form").on("click",function(b){b.preventDefault(),b.stopPropagation(),popup_message('<span style="font-size: 28px;"><i class="icon-spinner icon-spin icon-large"></i> Loading content...</span>',!0),a()})}),$(document).ready(function(){$(".drug_pro_add_item").on("click",function(a){a.preventDefault(),a.stopPropagation(),0===$("#drug_form").length&&$("#staging").append("<div id='drug_form'><div id='drug_list'></div></div>");var b="";$.ajax({cache:!1,url:"/center/drugs.castle",data:{skiplayout:1,exclude:b,typed_ref:$('[name="typed_ref"]').val()},success:function(a){$("#drug_list").html(a),$("#drug_form").dialog({autoOpen:!0,resizable:!1,width:$(window).width()-50,height:$(window).height()-50,modal:!0,draggable:!1,buttons:{Cancel:function(){$(this).dialog("close")}},create:function(){$("#mess").dialog("destroy"),$("#mess").remove(),$("body").css({overflow:"hidden"}),$(".ui-dialog-buttonpane").remove()
},open:function(){var a=$("#drug_list #data").DataTable({bJQueryUI:!0,sPaginationType:"full_numbers",fnDrawCallback:function(){}});$.each($("#drug_list #data thead th"),function(b){var c=$('<select><option value=""></option></select>').appendTo($(this)).on("change",function(){var c=$(this).val();a.column(b).search(c,!1,!0,!0).draw()});a.column(b).data().unique().sort().each(function(a){c.append('<option value="'+a+'">'+a+"</option>")})}),$(".additem").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$("#drug_list #data").dataTable(),c=$(this),d=c.closest("tr"),e=d.data("baseid"),f=b.find("tbody").find("tr").length,g=d.find("td").length,h=[],i=d.find("td:first").text()+'<input type="hidden" name="item.drugs['+(f-1)+'].baseid" value="'+e+'" class="drug_item list_item"/>';h.push(i),h.push(d.find("td:first").next("td").text()),g>2&&h.push(d.find("td:first").next("td").next("td").text()),g>3&&h.push(d.find("td:first").next("td").next("td").next("td").text()),g>4&&h.push(d.find("td:first").next("td").next("td").next("td").next("td").text()),h.push('<a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a>'),$("#drug_products").find(".datagrid").dataTable().fnAddData(h),d.fadeOut("75",function(){b.fnDeleteRow(b.fnGetPosition(d.get(0)))}),$("#drug_form").append("<span class='dialog_message ui-state-highlight'>Added to this "+$("#header_title").text()+"</span>"),setTimeout(function(){$(".dialog_message").fadeOut("500")},"1000"),$("ul .display.datagrid.dataTable .removal").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest("tr"),c=$(this).closest(".datagrid").dataTable();b.fadeOut("75",function(){c.fnDeleteRow(c.fnGetPosition(b.get(0)))})})})},close:function(){$("body").css({overflow:"auto"}),$("#drug_form").dialog("destroy"),$("#drug_form").remove()}}),$(window).resize(function(){$("#drug_form").dialog("option",{width:$(window).width()-50,height:$(window).height()-50})})}})})}),function(a){function b(){a.each(a(".query_item:not('#queryBed .query_item')"),function(b){a.each(a(this).find("input:visible ,select:visible "),function(){a(this).attr("name",a(this).attr("name").split("[")[0]+"["+b+"]")})})}function c(){a(".property_selector").off().on("change",function(){var c=a(this).val(),d=a(this).closest(".query_item");d.find(".input_box input,.input_box select").removeAttr("name"),d.find(".input_box [name*=value]").val(""),d.find(".input_box").removeClass("showen"),d.find(".input_box."+c).addClass("showen"),d.find(".input_box:visible").length<=0&&d.find(".input_box.gen").addClass("showen"),d.find(".input_box:visible input,.input_box:visible select").attr("name","value[9999]"),b()})}function d(b){a.each(a('form select.property_selector,form select[name="selected_properties"]'),function(){a(this).find("option").attr("selected",!1),a(this).find("optgroup").hideOptionGroup();var c=a(this).closest("select").attr("name");a("optgroup."+b+'s[data-pname="'+c+'"]').showOptionGroup()})}function e(b){make_maskes(),moa_dmpk_setup(),apply_tax_request(),apply_taxed_add(),setting_item_pub(a(".ui-dialog")),a('input[name^="post"]').val(a('input[name="item.baseid"]').val()),a("#load_file").on("click",function(){a(".load_file").toggleClass("active")}),a("#drug_form [type='submit']").on("click",function(c){var d=a(this).closest("form");d.find(":invalid").length<=0&&(c.preventDefault(),c.stopPropagation(),a.post(d.attr("action")+"?skiplayout=1&ajaxed_update=1",d.serialize(),function(){a("#drug_form").dialog("destroy"),a("#drug_form").remove(),a(".add_to_list[data-type='"+b+"']").trigger("click")}))})}function f(b,c,d,f){"undefined"==typeof d&&(d=["new","list"]),0===a("#drug_form").length&&a("#staging").append("<div id='drug_form'><div id='drug_list'></div><div id='drug_item'></div></div>");var h="";a.ajax({cache:!1,url:"/center/"+b+"s.castle",data:{skiplayout:1,exclude:c,typed_ref:a('[name="typed_ref"]').val()},success:function(i){a.inArray("list",d)>-1&&(a("#drug_list").html(i),h+="<a href='#drug_list' id='drug_list_tab' class='popuptab button med active'>List</a>"),a.ajax({cache:!1,url:"/center/"+b+".castle",data:{skiplayout:1,id:"undefined"==typeof f?"":f,typed_ref:a('[name="typed_ref"]').val()},success:function(f){a.inArray("new",d)>-1&&(a("#drug_item").html(f),h+="<a href='#drug_item' id='drug_item_tab' class='popuptab button med'>New</a>"),a("#drug_form").dialog({autoOpen:!0,resizable:!1,width:a(window).width()-50,height:a(window).height()-50,modal:!0,draggable:!1,buttons:{Cancel:function(){a(this).dialog("close")}},create:function(){a("#mess").dialog("destroy"),a("#mess").remove(),""!==a("#drug_item").html()&&""!==a("#drug_list").html()&&(a("#drug_form").closest(".ui-dialog").find(".ui-dialog-title").append(h),a("#drug_item").hide()),a("body").css({overflow:"hidden"}),a(".ui-dialog-buttonpane").remove(),a("#drug_list").html().length>0&&k(b),a(".popuptab").off().on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(".popuptab.active").attr("href");a(c).hide(),a(".popuptab.active").removeClass("active"),a(this).addClass("active"),c=a(this).attr("href"),a(c).show()}),e(b,c,d),g()},close:function(){a("body").css({overflow:"auto"}),a("#drug_form").dialog("destroy"),a("#drug_form").remove(),l=null}}),a(window).resize(function(){a("#drug_form").dialog("option",{width:a(window).width()-50,height:a(window).height()-50})})}})}})}function g(){function b(){a(".remove").hover(function(){a(this).removeClass("red")},function(){a(this).addClass("red")}),a(".remove").on("click",function(){var b=a(this).closest("li"),c=b.find('[name^="option"]').val();a(".adverse_events option[value='"+c+"']").removeAttr("disabled"),b.fadeOut(function(){a(this).remove()})}),c()}function c(){a.each(a(".adverse_events").closest("ul").find("li[data-taxorder]"),function(b){a(this).data("taxorder",b),a.each(a(this).find("input,select:not([name=''])"),function(){a(this).attr("name",a(this).attr("name").split("[")[0]+"["+b+"]")})})}a(".adverse_events").on("change",function(){var d=a(this).val(),e=a(this).find('option[value="'+d+'"]'),f=a(this).closest("ul"),g=e.data("baseid"),h=e.data("content"),i=e.data("alias"),j="none"===i?"":"required";f.append('<li data-taxorder="9999" data-name="'+e.val()+'"><i class="icon-remove-circle red right remove"></i><label>'+e.text()+' <i class="icon-question-sign blue" title="'+h+'"></i></label><input type="'+("none"===i?"hidden":"text")+'" name="value[9999]" id="" '+j+' value=""/><input type="hidden" name="option_key[9999]" value="'+g+'" /></li>'),e.attr("disabled",!0),a(this).val(""),b(),c(),make_maskes()}),b()}function h(b){var c="",d=b.dataTable().fnGetNodes();return a.each(d,function(b,d){var e=a(d).find("input.list_item");c+=(""===c?"":",")+e.val()}),c}function i(b){var c="";return a.each(b.find("option"),function(){c+=(""===c?"":",")+a(this).val()}),c}function j(b,c){a(".additem").off().on("click",function(d){d.preventDefault(),d.stopPropagation();var e=a(this),f=e.closest("tr"),g=f.data("baseid"),h=b.find("tbody").find("tr").length,i=f.find("td").length,j=[],k=f.find("td:first").text()+'<input type="hidden" name="item.'+c+"s["+(h-1)+'].baseid" value="'+g+'" class="drug_item list_item"/>';j.push(k),j.push(f.find("td:first").next("td").text()),i>3&&j.push(f.find("td:first").next("td").next("td").text()),j.push('<a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a>'),a("[data-active_grid='true']").dataTable().fnAddData(j),f.fadeOut("75",function(){b.fnDeleteRow(b.fnGetPosition(f.get(0)))}),a("#drug_form").append("<span class='dialog_message ui-state-highlight'>Added to this "+a("#header_title").text()+"</span>"),setTimeout(function(){a(".dialog_message").fadeOut("500")},"1000"),a("ul .display.datagrid.dataTable .removal").off().on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).closest("tr"),d=a(this).closest(".datagrid").dataTable();c.fadeOut("75",function(){d.fnDeleteRow(d.fnGetPosition(c.get(0)))})})})}function k(b){a.each(a(".datagrid:not(.dataTable)"),function(){var c=a(this);c.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",fnDrawCallback:function(){j(c)}}),l=c,j(c,b)})}var l=null;a(document).ready(function(){a("select[name*='inactive_ingredients[]']").on("change",function(){var b="";a.each(a(this).find(":selected"),function(c){b+=(c>0?",":"")+a(this).val()}),a("[name$='inactive_ingredients']").val(b)}),a("#start_save_query").on("click",function(b){b.preventDefault(),b.stopPropagation(),a("#to_save_query").slideDown(),a("#start_save_query").slideUp()}),moa_dmpk_setup(),make_maskes(),a(".add_ref").length&&a(".add_ref").on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).closest(".datagrid").dataTable({aaSorting:[[1,"asc"]]});c.dataTable().fnAddData(['<input type="hidden" name="item.references[$count].baseid" value="$part.baseid" class="drug_item"/>$part.type','<a href="$item.url" class="ref_link"><i class="icon-external-link"></i></a>',"$item.note",'<a href="substance.castle?id=$part.baseid" class="button small inline_edit" data-type="substance">Edit</a> | <a href="#" class="button xsmall crimson defocus removal">Remove</a>'])}),a('select[name^="property"],.property_selector').length&&a("#types").on("change",function(){d(a("#types").val()),a(".input_box").removeClass("showen"),a(".input_box.gen").addClass("showen"),a(".input_box [name*=value]").val("")}).trigger("change"),a(".claim_item").on("keyup",function(){var b="";a.each(a(".claim_item"),function(){b+=(""===b?"":":")+a(this).val()}),a("#item_label_claim").val(b),a("#CLAIM").text(b)}),a("#ADD_query").on("click",function(e){e.preventDefault(),e.stopPropagation(),a(".query_item:not('#queryBed .query_item')").last().after(a("#queryBed").html()),a(".REMOVE_query").off().on("click",function(d){d.preventDefault(),d.stopPropagation(),a(this).closest(".query_item").fadeOut("150",function(){a(this).remove(),c(),b()})}),c(),b(),d(a("#types").val())}),c(),a("#load_file").on("click",function(){a(".load_file").toggleClass("active"),a(".load_file input").removeAttr("required"),a(".load_file:visible input").attr("required",!0)}),a('form[name="entry_form"] :input').on("change",function(){var b=!0;a.each(a("input,select"),function(){""!==a('form[name="entry_form"] :input').not(":hidden").val()&&(b=!1)}),a('input[name="empty"]').val(b+"")});var e=!0,j=!1;if(a('form[name="entry_form"] [type="submit"]').on("click",function(){var b=a(this);return"true"!==a('input[name="empty"]').val()||j||e||(a("#message").length<=0&&a("body").append("<div id='message'>"),a("#message").html("The form is empty, are you sure you want to add the record?"),a("#message").dialog({autoOpen:!0,resizable:!1,width:350,height:200,modal:!0,draggable:!1,buttons:{Cancel:function(){a(this).dialog("close")},Ok:function(){a(this).dialog("close"),j=!0,b.trigger("click")}},create:function(){a("body").css({overflow:"hidden"})},close:function(){a("body").css({overflow:"auto"}),a("#message").dialog("destroy"),a("#message").remove()}})),"true"!==a('input[name="empty"]').val()||j||e?!0:!1}),apply_tax_request(),apply_taxed_add(),apply_a_taxed_add(),g(),a(".datagrid").length){var k=a(".datagrid");a.each(k,function(){var b=a(this);b.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",aaSorting:[[1,"asc"]]})});var l=a(".add_to_list");a.each(l,function(){var b=a(this);b.on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),d=c.data("type"),e=c.prev(".dataTables_wrapper").find(".datagrid");a("[data-active_grid='true']").attr("data-active_grid",!1),e.attr("data-active_grid",!0);var g="";e.find(".dataTables_empty").length<=0&&(g=h(e)),popup_message('<span style="font-size: 28px;"><i class="icon-spinner icon-spin icon-large"></i> loading ... </span>',!0),f(d,g,["new","list"])})});var m=a(".display.datagrid.dataTable .removal");a.each(m,function(){var b=a(this);b.on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),d=c.closest("tr"),e=c.closest(".datagrid").dataTable();d.fadeOut("75",function(){var a=d.get(0);e.fnDeleteRow(e.fnGetPosition(a))})})})}a("option.add_item").on("click",function(b){b.preventDefault(),b.stopPropagation(),a(this).attr("selected",!1),f(a(this).closest("select").data("type"),i(a(this).closest("select")),["new"])}),a(".inline_edit").on("click",function(b){b.preventDefault(),b.stopPropagation(),popup_message('<span style="font-size: 28px;"><i class="icon-spinner icon-spin icon-large"></i> </span>',!0),f(a(this).data("type"),"",["new"],a(this).closest("tr").data("baseid"))})})}(jQuery);