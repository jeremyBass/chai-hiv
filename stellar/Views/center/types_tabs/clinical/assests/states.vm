#* drugdata *#
<label for="DDIdata">States:<i title="Click for help with this block" data-block="states_block" class="icon-question-sign blue help_block"></i></label>
<div style="position:relative;">
	<div class="block_helper" id="states_block" style="display:none;">
		#set($props = $objectService.explode("state,auc,auc_unit,auc_last_value,bioavailability,cmax,tmax"))
		<ul>
		#foreach($prop in $!props)
			#set($feildObj = $postingService.get_taxonomy('clinical', $prop, "SYSTEM__feild_helpers"))
			#if($feildObj.content)
				<li><b>$feildObj.name:</b> $feildObj.content</li>
			#end
		#end
		</ul>
	</div>
</div>


<table class="display datagrid with_action" id="clinical_states" width="100%">
	<thead>
		<tr>
			<th width="15%" id="ddi_drug_product">Type</th>
			<th >State Details</th>
			<th width="25px" class="no-sort"></th>
		</tr>
	</thead>
	<tfoot>
		<tr>
			<th width="15%"></th>
			<th></th>
			<th width="25px" class="no-sort"></th>
		</tr>
	</tfoot>
	<tbody>
		#set($i = 0)
		#foreach($state in $!item.arm_states)
				#set($i = $i+1)
		#end
		<tr class=""  data-baseid="$part.baseid">
			<td>
				$Controller.feilds("hidden","{'objectName':'arm_states[$i]', 'model_prop':'arm.baseid', 'value':'$!item.baseid' }")
				$Controller.feilds("select","{'objectName':'arm_states[$i]', 'datatype':'clinical', 'model_prop':'state', 'value':'$!state.state', 'select_options':'Fasting,Fed,Steady', 'skip_help':'true'}")
			</td>
			<td>
				<div class="grid col-one-half">
					#* cmax *#
							$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical', 'model_prop':'cmax', 'value':'$!state.cmax',  'placeholder':'(ng/ml)', 'skip_help':'true'}")<br/>
							
					#* tmax *#
							$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'tmax', 'value':'$!state.tmax', 'placeholder':'(hours)', 'skip_help':'true'}")<br/>
						
					#* bioavailability *#
							$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'bioavailability', 'value':'$!state.bioavailability', 'placeholder':'(%)', 'skip_help':'true'}")
				</div>
			
				<div class="grid col-one-half">
					#* auc *#
						$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'auc', 'value':'$!state.auc', 'custom_lable':'auc', 'placeholder':'(%)', 'skip_help':'true'}") 
				
					#* auc_unit *#
						$Controller.feilds("select","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'auc_unit', 'value':'$!state.auc_unit', 'select_options':'inf.,0-12,0-24,0-48,0-last', 'skip_help':'true'}")<br/>
				
					#* auc_last_value *#
						$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'auc_last_value', 'value':'$!state.auc_last_value', 'placeholder':'(%)', 'skip_help':'true'}")
				</div>
			</td>
			<td> #if($viewonly) #else <a href="#" class="button xsmall crimson defocus removal"><i class="icon-remove" title="Remove"></i></a> #end	</td>
		</tr>
	</tbody>
</table>
<a href="#" id="add_clinical_state" class="button" data-type="clinical_state">Add New State</a>
<div style="clear: both;"></div>
<script>
var data_table_clinical_states=[
	"$Controller.feilds("hidden","{'objectName':'arm_states[$i]', 'model_prop':'arm.baseid', 'value':'' }") $Controller.feilds("select","{'objectName':'arm_states[$i]', 'datatype':'clinical', 'model_prop':'state', 'value':'', 'select_options':'Fasting,Fed,Steady', 'skip_help':'true'}")",
	"<div class='grid col-one-half'>$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical', 'model_prop':'cmax', 'value':'$!state.cmax',  'placeholder':'(ng/ml)', 'skip_help':'true'}")<br/>$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'tmax', 'value':'$!state.tmax', 'placeholder':'(hours)', 'skip_help':'true'}")<br/>$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'bioavailability', 'value':'$!state.bioavailability', 'placeholder':'(%)', 'skip_help':'true'}")</div><div class='grid col-one-half'>$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'auc', 'value':'$!state.auc', 'custom_lable':'auc', 'placeholder':'(%)', 'skip_help':'true'}") $Controller.feilds("select","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'auc_unit', 'value':'$!state.auc_unit', 'select_options':'inf.,0-12,0-24,0-48,0-last', 'skip_help':'true'}")<br/>$Controller.feilds("text","{'objectName':'arm_states[$i]', 'datatype':'clinical','model_prop':'auc_last_value', 'value':'$!state.auc_last_value', 'placeholder':'(%)', 'skip_help':'true'}")</div>",
	"#if($viewonly) #else <a href='#' class='button xsmall crimson defocus removal'><i class='icon-remove' title='Remove'></i></a> #end"
];
</script>